<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reloj Minimalista Multilenguaje</title>
<style>
  body {
    margin:0; display:flex; flex-direction:column; align-items:center; justify-content:center;
    height:100vh; font-family: monospace; background:#000; color:#0f0;
    transition: background 0.3s, color 0.3s;
  }
  #clock {
    font-size: 7.5rem;
    letter-spacing: 4px;
    cursor: pointer;
  }
  .controls {
    margin-top: 20px;
    display: none;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
  }
  label { font-size: 0.9rem; }
</style>
</head>
<body>

<div id="clock" tabindex="0"></div>

<div class="controls" id="controls">
  <label>Formato:
    <select id="format">
      <option value="24">24h</option>
      <option value="12">12h</option>
    </select>
  </label>
  <label>Idioma:
    <select id="language">
      <option value="en">Inglés</option>
      <option value="zh">Chino Mandarín</option>
      <option value="hi">Hindi</option>
      <option value="es" selected>Español</option>
      <option value="ar">Árabe</option>
    </select>
  </label>
  <label>Tamaño:
    <select id="size">
      <option value="25">25%</option>
      <option value="50">50%</option>
      <option value="75">75%</option>
      <option value="100" selected>100%</option>
      <option value="150">150%</option>
      <option value="200">200%</option>
      <option value="300">300%</option>
    </select>
  </label>
  <label>Fuente:
    <select id="font">
      <option value="monospace">Monospace</option>
      <option value="sans-serif">Sans Serif</option>
      <option value="serif">Serif</option>
      <option value="'Courier New', monospace">Courier</option>
    </select>
  </label>
  <label>Color números:
    <input type="color" id="color" value="#00ff00">
  </label>
  <label>Color fondo:
    <input type="color" id="bgcolor" value="#000000">
  </label>
  <label>Alarma:
    <input type="time" id="alarmTime">
  </label>
  <button id="setAlarm">Activar</button>
  <button id="clearAlarm">Quitar</button>
  <button id="fullscreenBtn">⛶ Pantalla completa</button>
</div>

<audio id="alarmSound" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg" preload="auto"></audio>

<script>
const clock = document.getElementById('clock');
const controls = document.getElementById('controls');
const formatSel = document.getElementById('format');
const fontSel = document.getElementById('font');
const colorSel = document.getElementById('color');
const bgSel = document.getElementById('bgcolor');
const alarmInput = document.getElementById('alarmTime');
const alarmSound = document.getElementById('alarmSound');
const fullscreenBtn = document.getElementById('fullscreenBtn');
const langSel = document.getElementById('language');
const sizeSel = document.getElementById('size');

let alarmTime = null;
let alarmActive = false;
let hideTimeout = null;

// Cargar preferencias
if(localStorage.getItem('prefs')){
  const prefs = JSON.parse(localStorage.getItem('prefs'));
  formatSel.value = prefs.format;
  fontSel.value = prefs.font;
  colorSel.value = prefs.color;
  bgSel.value = prefs.bg;
  langSel.value = prefs.lang;
  sizeSel.value = prefs.size;
  document.body.style.fontFamily = prefs.font;
  document.body.style.color = prefs.color;
  document.body.style.backgroundColor = prefs.bg;
  clock.style.fontSize = (7.5 * (prefs.size/100)) + 'rem';
}

function savePrefs(){
  localStorage.setItem('prefs', JSON.stringify({
    format: formatSel.value,
    font: fontSel.value,
    color: colorSel.value,
    bg: bgSel.value,
    lang: langSel.value,
    size: sizeSel.value
  }));
}

function updateClock(){
  const now = new Date();
  let hours = now.getHours();
  let minutes = now.getMinutes();
  let seconds = now.getSeconds();
  let ampm = '';

  if(formatSel.value === '12'){
    ampm = hours >= 12 ? ' PM' : ' AM';
    hours = hours % 12 || 12;
  }

  const timeStr = 
    String(hours).padStart(2,'0') + ':' +
    String(minutes).padStart(2,'0') + ':' +
    String(seconds).padStart(2,'0') + ampm;

  clock.textContent = timeStr;

  if(alarmActive && alarmTime){
    const current = now.toTimeString().slice(0,5);
    if(current === alarmTime){
      alarmSound.play();
      alarmActive = false;
      alert('⏰ ¡Alarma!');
    }
  }
}

setInterval(updateClock, 1000);
updateClock();

// Mostrar controles
function showControls(){
  controls.style.display = 'flex';
  clearTimeout(hideTimeout);
  hideTimeout = setTimeout(()=> controls.style.display = 'none', 10000);
}

clock.addEventListener('mouseenter', showControls);
clock.addEventListener('click', showControls);
clock.addEventListener('keydown', e=>{
  if(e.key === 'Enter'){ showControls(); }
});

controls.addEventListener('mouseleave', ()=> controls.style.display = 'none');

// Personalización
formatSel.addEventListener('change', ()=>{ updateClock(); savePrefs(); });
fontSel.addEventListener('change', ()=>{ document.body.style.fontFamily = fontSel.value; savePrefs(); });
colorSel.addEventListener('input', ()=>{ document.body.style.color = colorSel.value; savePrefs(); });
bgSel.addEventListener('input', ()=>{ document.body.style.backgroundColor = bgSel.value; savePrefs(); });
langSel.addEventListener('change', ()=>{ document.documentElement.lang = langSel.value; savePrefs(); });
sizeSel.addEventListener('change', ()=>{
  clock.style.fontSize = (7.5 * (sizeSel.value/100)) + 'rem';
  savePrefs();
});

// Alarma
document.getElementById('setAlarm').addEventListener('click', ()=>{
  if(alarmInput.value){
    alarmTime = alarmInput.value;
    alarmActive = true;
    alert('Alarma configurada para ' + alarmTime);
  }
});
document.getElementById('clearAlarm').addEventListener('click', ()=>{
  alarmTime = null;
  alarmActive = false;
  alert('Alarma eliminada');
});

// Pantalla completa
fullscreenBtn.addEventListener('click', ()=>{
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen().catch(err => {
      console.warn(`No se pudo activar pantalla completa: ${err.message}`);
    });
  } else {
    document.exitFullscreen();
  }
});
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reloj Minimalista Multilenguaje</title>
<style>
  body {
    margin:0; display:flex; flex-direction:column; align-items:center; justify-content:center;
    height:100vh; font-family: monospace; background:#000; color:#0f0;
    transition: background 0.3s, color 0.3s;
  }
  #clock {
    font-size: 7.5rem;
    letter-spacing: 4px;
    cursor: pointer;
  }
  .controls {
    margin-top: 20px;
    display: none;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
  }
  label { font-size: 0.9rem; }
</style>
</head>
<body>

<div id="clock" tabindex="0"></div>

<div class="controls" id="controls">
  <label id="lblFormat">Formato:
    <select id="format">
      <option value="24">24h</option>
      <option value="12">12h</option>
    </select>
  </label>
  <label id="lblLang">Idioma:
    <select id="language">
      <option value="en">English</option>
      <option value="zh">中文</option>
      <option value="hi">हिन्दी</option>
      <option value="es" selected>Español</option>
      <option value="ar">العربية</option>
    </select>
  </label>
  <label id="lblSize">Tamaño:
    <select id="size">
      <option value="25">25%</option>
      <option value="50">50%</option>
      <option value="75">75%</option>
      <option value="100" selected>100%</option>
      <option value="150">150%</option>
      <option value="200">200%</option>
      <option value="300">300%</option>
    </select>
  </label>
  <label id="lblFont">Fuente:
    <select id="font">
      <option value="monospace">Monospace</option>
      <option value="sans-serif">Sans Serif</option>
      <option value="serif">Serif</option>
      <option value="'Courier New', monospace">Courier</option>
    </select>
  </label>
  <label id="lblColor">Color números:
    <input type="color" id="color" value="#00ff00">
  </label>
  <label id="lblBg">Color fondo:
    <input type="color" id="bgcolor" value="#000000">
  </label>
  <label id="lblAlarm">Alarma:
    <input type="time" id="alarmTime">
  </label>
  <button id="setAlarm">Activar</button>
  <button id="clearAlarm">Quitar</button>
  <button id="fullscreenBtn">⛶ Pantalla completa</button>
</div>

<audio id="alarmSound" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg" preload="auto"></audio>

<script>
const clock = document.getElementById('clock');
const controls = document.getElementById('controls');
const formatSel = document.getElementById('format');
const fontSel = document.getElementById('font');
const colorSel = document.getElementById('color');
const bgSel = document.getElementById('bgcolor');
const alarmInput = document.getElementById('alarmTime');
const alarmSound = document.getElementById('alarmSound');
const fullscreenBtn = document.getElementById('fullscreenBtn');
const langSel = document.getElementById('language');
const sizeSel = document.getElementById('size');
const setAlarmBtn = document.getElementById('setAlarm');
const clearAlarmBtn = document.getElementById('clearAlarm');

let alarmTime = null;
let alarmActive = false;
let hideTimeout = null;

// Diccionario de traducciones
const translations = {
  es: {
    lblFormat: "Formato:",
    lblLang: "Idioma:",
    lblSize: "Tamaño:",
    lblFont: "Fuente:",
    lblColor: "Color números:",
    lblBg: "Color fondo:",
    lblAlarm: "Alarma:",
    setAlarm: "Activar",
    clearAlarm: "Quitar",
    fullscreenBtn: "⛶ Pantalla completa"
  },
  en: {
    lblFormat: "Format:",
    lblLang: "Language:",
    lblSize: "Size:",
    lblFont: "Font:",
    lblColor: "Number color:",
    lblBg: "Background color:",
    lblAlarm: "Alarm:",
    setAlarm: "Set",
    clearAlarm: "Clear",
    fullscreenBtn: "⛶ Fullscreen"
  },
  zh: {
    lblFormat: "格式:",
    lblLang: "语言:",
    lblSize: "大小:",
    lblFont: "字体:",
    lblColor: "数字颜色:",
    lblBg: "背景颜色:",
    lblAlarm: "闹钟:",
    setAlarm: "设置",
    clearAlarm: "清除",
    fullscreenBtn: "⛶ 全屏"
  },
  hi: {
    lblFormat: "प्रारूप:",
    lblLang: "भाषा:",
    lblSize: "आकार:",
    lblFont: "फ़ॉन्ट:",
    lblColor: "संख्या का रंग:",
    lblBg: "पृष्ठभूमि का रंग:",
    lblAlarm: "अलार्म:",
    setAlarm: "सक्रिय करें",
    clearAlarm: "हटाएं",
    fullscreenBtn: "⛶ पूर्ण स्क्रीन"
  },
  ar: {
    lblFormat: "التنسيق:",
    lblLang: "اللغة:",
    lblSize: "الحجم:",
    lblFont: "الخط:",
    lblColor: "لون الأرقام:",
    lblBg: "لون الخلفية:",
    lblAlarm: "المنبه:",
    setAlarm: "تفعيل",
    clearAlarm: "إزالة",
    fullscreenBtn: "⛶ ملء الشاشة"
  }
};

function applyTranslations(lang){
  const t = translations[lang];
  document.getElementById('lblFormat').childNodes[0].textContent = t.lblFormat + " ";
  document.getElementById('lblLang').childNodes[0].textContent = t.lblLang + " ";
  document.getElementById('lblSize').childNodes[0].textContent = t.lblSize + " ";
  document.getElementById('lblFont').childNodes[0].textContent = t.lblFont + " ";
  document.getElementById('lblColor').childNodes[0].textContent = t.lblColor + " ";
  document.getElementById('lblBg').childNodes[0].textContent = t.lblBg + " ";
  document.getElementById('lblAlarm').childNodes[0].textContent = t.lblAlarm + " ";
  setAlarmBtn.textContent = t.setAlarm;
  clearAlarmBtn.textContent = t.clearAlarm;
  fullscreenBtn.textContent = t.fullscreenBtn;
}

function savePrefs(){
  localStorage.setItem('prefs', JSON.stringify({
    format: formatSel.value,
    font: fontSel.value,
    color: colorSel.value,
    bg: bgSel.value,
    lang: langSel.value,
    size: sizeSel.value
  }));
}

function updateClock(){
  const now = new Date();
  let hours = now.getHours();
  let minutes = now.getMinutes();
  let seconds = now.getSeconds();
  let ampm = '';

  if(formatSel.value === '12'){
    ampm = hours >= 12 ? ' PM' : ' AM';
    hours = hours % 12 || 12;
  }

  const timeStr = 
    String(hours).padStart(2,'0') + ':' +
    String(minutes).padStart(2,'0') + ':' +
    String(seconds).padStart(2,'0') + ampm;

  clock.textContent = timeStr;

  if(alarmActive && alarmTime){
    const current = now.toTimeString().slice(0,5);
    if(current === alarmTime){
      alarmSound.play();
      alarmActive = false;
      alert('⏰ ¡Alarma!');
    }
  }
}

// Mostrar controles
function showControls(){
  controls.style.display = 'flex';
  clearTimeout(hideTimeout);
  hideTimeout = setTimeout(()=> controls.style.display = 'none', 10000);
}

// Eventos para mostrar/ocultar
clock.addEventListener('mouseenter', showControls);
clock.addEventListener('click', showControls);
clock.addEventListener('keydown', e=>{
  if(e.key === 'Enter'){ showControls(); }
